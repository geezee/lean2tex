\documentclass{article}

\bibliographystyle{acm}

\usepackage{amssymb} % used for the \blacktriangleright in minted
\usepackage{minted}
\usepackage{multicol}
\usemintedstyle{pastie}

\usepackage[dvipsnames]{xcolor}
\usepackage{graphicx}
\usepackage{tikz}

\usepackage{hyperref}
\hypersetup{
  colorlinks = true,
  linkbordercolor = {white},
  linkcolor = {RoyalPurple},
  citecolor = {ForestGreen},
}

% A font is needed that includes Lean unicode characters
\usepackage{fontspec}
\setmonofont{FreeMono}

% if you want an index
\usepackage{imakeidx}
\makeindex

\definecolor{codebg}{rgb}{0.98,0.98,0.95}

\newcommand{\leanRef}[2]{%
  \hyperref[lean:#1]{\ttfamily#2}%
}

\newcommand{\leanLabel}[2]{%
  \phantomsection%
  \label{lean:#1}%
  \index{\leanRef{#1}{#2}}%
}

\newenvironment{leanProofGoal}[4]
 {\VerbatimEnvironment
  \phantomsection
  \label{lean:proof:#1:#2}
  \noindent {\scriptsize \textbf{\hyperref[lean:proof:#1:#2:back]{{\tiny $\blacktriangleleft$} Line #4: #3}}}\\
  \begin{minipage}{\linewidth}
  \centering
  \begin{minted}[frame=lines, fontsize=\tiny]{lean4}}
 {\end{minted}\end{minipage}\\}

\makeatletter
\newcommand{\leanProofGoalRef}[2]{%
  \@ifundefined{r@lean:proof:#1:#2}{}{%
    \phantomsection%
    \label{lean:proof:#1:#2:back}%
    \hyperref[lean:proof:#1:#2]{%
      \raisebox{0.2ex}{\tiny$\blacktriangleright$}%
    }%
  }%
}
\makeatother

\usepackage{tcolorbox}


\begin{document}
\input{out.tex}
\bibliography{out}
\printindex
\appendix
\begin{multicols}{2}
\input{proof_out.tex}
\end{multicols}
\end{document}
